(()=>{"use strict";const e=document.querySelector("#subjectModal");function t(){e.classList.remove("open")}const n=document.querySelector("#itemModal");function c(){n.classList.remove("open")}const i=document.querySelector("#subjectError"),r=document.querySelector("#subjectDupError"),d=document.querySelector("#subjectInput");function o(){d.value=""}function s(){const e=document.querySelector("#itemDueDateInput");let t=new Date,n=String(t.getDate()).padStart(2,"0"),c=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();return t=i+"-"+c+"-"+n,e.value=t,t}function u(e){this.newItemBtn=document.createElement("button"),this.createItemBtn=function(){this.newItemBtn.classList.add("item-btn"),this.newItemBtn.innerHTML="+",e.appendChild(this.newItemBtn),this.newItemBtn.addEventListener("click",(function(){s(),n.classList.add("open"),function(){const e=document.querySelector("#itemTitleInput"),t=document.querySelector("#itemDescriptionInput"),n=document.querySelector("#itemPriorityInput");e.value="",t.value="",s(),n.value="high"}()}))}}function l(e){this.subject=e,this.createBoard=function(){const t=document.querySelector(".item-wrap"),n=document.createElement("div");n.classList.add("subject-board"),n.classList.add("hidden"),n.setAttribute("id",`${e}Board`),t.appendChild(n),new u(n).createItemBtn()}}function a(e,t,n,c){this.title=e,this.description=t,this.dueDate=n,this.priority=c}const m=document.querySelector(".subject-title");document.querySelector("#date").innerHTML=s();const p={};let h="";const L=document.querySelector("#createSubjectBtn"),v=document.querySelector("#subjectFormBtn"),y=document.querySelector("#itemFormBtn");function S(e){this.newBtn=document.createElement("button"),this.createSubjectBtn=function(){const t=document.querySelector(".subject-box");this.newBtn.classList.add("subject-btn"),this.newBtn.setAttribute("id",`${e}Btn`),this.newBtn.innerHTML=`${e}`,t.appendChild(this.newBtn),this.newBtn.addEventListener("click",(function(){document.querySelectorAll(".subject-board").forEach((t=>{t.id===`${e}Board`?t.classList.remove("hidden"):t.classList.add("hidden")})),h=e,m.innerHTML=h}))}}L.addEventListener("click",(function(){e.classList.add("open"),i.classList.add("hidden"),o(),r.classList.add("hidden")})),e.addEventListener("click",(function(e){!e.target.closest(".modal-inner")&&t()})),n.addEventListener("click",(function(e){const t=!e.target.closest(".modal-inner"),n=document.querySelector("#itemTitleInputError"),i=document.querySelector("#itemTitleLongError"),r=document.querySelector("#itemDescriptionLongError");t&&(c(),r.classList.add("hidden"),i.classList.add("hidden"),n.classList.add("hidden"))})),v.addEventListener("click",(function(e){e.preventDefault();const n=document.querySelector("#subjectInput"),c=new S(n.value);let d=Array.from(document.querySelectorAll(".subject-btn"));const s=Boolean(function(e,t){let n;return e.length>0&&e.forEach((e=>{e.id===t&&(n=1)})),n}(d,`${n.value}Btn`));if(0==n.value)i.classList.remove("hidden");else if(s)r.classList.remove("hidden"),o();else{const e=new l(n.value);c.createSubjectBtn(),e.createBoard(),p[n.value]=[],t()}})),y.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector("#itemTitleInput"),n=document.querySelector("#itemDescriptionInput"),i=document.querySelector("#itemDueDateInput"),r=document.querySelector("#itemPriorityInput"),d=document.querySelector("#itemTitleInputError"),o=document.querySelector("#itemTitleLongError"),s=document.querySelector("#itemDescriptionLongError");if(0===t.value.length)d.classList.remove("hidden");else if(t.value.length>23)o.classList.remove("hidden");else if(n.value.length>256)s.classList.remove("hidden");else{const e=new a(t.value,n.value,i.value,r.value);p[h].push(e),console.log(p),c(),function(e,t){const n=document.getElementById(`${t}Board`);for(let t=e.length-1;t<e.length;t++){const c=document.createElement("div");c.classList.add("item-card"),n.appendChild(c);const i=document.createElement("div"),r=document.createElement("p"),d=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");i.classList.add("card-title"),r.classList.add("card-description"),d.classList.add("card-due-date"),o.classList.add("card-priority"),s.classList.add("card-footer"),i.innerHTML=e[t].title,r.innerHTML=e[t].description,d.innerHTML=`Due: ${e[t].dueDate}`,"high"===e[t].priority?o.classList.add("high-priority"):"moderate"===e[t].priority?o.classList.add("moderate-priority"):"low"===e[t].priority&&o.classList.add("low-priority"),c.appendChild(o),c.appendChild(i),c.appendChild(r),c.appendChild(s),s.appendChild(d);const u=document.createElement("button");u.classList.add("card-delete-btn"),u.innerHTML="x",u.addEventListener("click",(()=>{c.remove()})),s.appendChild(u)}}(p[h],h)}}))})();